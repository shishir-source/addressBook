(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(40),o=a.n(c),d=(a(66),a(6)),s=a(54),i=a(55),r=a(56),m=a(59),u=a(57),p=a(60),v=a(2),E=(a(68),a(58)),y=(a(73),a(41));y.initializeApp({apiKey:"AIzaSyDT3EmgtaIht2B2fZcg0TjeEy7Zg9zSRiA",authDomain:"address-book-85e7d.firebaseapp.com",databaseURL:"https://address-book-85e7d.firebaseio.com",projectId:"address-book-85e7d",storageBucket:"address-book-85e7d.appspot.com",messagingSenderId:"230479373923"});var f=y.database(),h=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={contactList:[],listLoaded:!1,action:""},a.filterContacts=a.filterContacts.bind(Object(v.a)(Object(v.a)(a))),a.addContact=a.addContact.bind(Object(v.a)(Object(v.a)(a))),a.hide=a.hide.bind(Object(v.a)(Object(v.a)(a))),a.editContact=a.editContact.bind(Object(v.a)(Object(v.a)(a))),a.renderAddContact=a.renderAddContact.bind(Object(v.a)(Object(v.a)(a))),a.updateContact=a.updateContact.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.ref("contacts").on("value",function(t){var a=[];t.forEach(function(e){a.push(Object(s.a)({id:e.key},e.val()))}),console.log(a),e.setState({contactList:a,listLoaded:!0})})}},{key:"filterContacts",value:function(e){e.preventDefault();var t=e.target.value.trim();this.setState({contactList:this.state.contactList.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())})})}},{key:"removeContact",value:function(e){e.preventDefault();var t=e.target,a=t.closest("tr").id,n=t.closest("tr").childNodes[1].innerText;Object(E.confirmAlert)({title:"",message:"Are you sure you want to delete contact ".concat(n,"?"),buttons:[{label:"Yes",onClick:function(){f.ref("contacts/".concat(a)).remove()}},{label:"No",onClick:function(){}}]})}},{key:"fetchInfoByPostcode",value:function(e){e.preventDefault();var t=e.target.value.trim().substring(0,3);console.log(t),fetch("https://api.postcodes.io/outcodes/".concat(t)).then(function(e){return e.json()}).then(function(e){200===e.status&&(console.log(e.result.admin_county),document.getElementById("town-city").value=e.result.admin_district[0],document.getElementById("county").value=e.result.admin_county)})}},{key:"renderAddContact",value:function(e){e.preventDefault(),this.setState({action:"add"}),this.renderForm(e)}},{key:"addContact",value:function(e){e.preventDefault();var t,a=this.getPopupValues();t=a,f.ref("contacts").push().set(t),this.hide()}},{key:"updateContact",value:function(e){e.preventDefault();var t=document.getElementById("id").value;!function(e,t){f.ref("contacts/".concat(t)).set(e)}(this.getPopupValues(),t),this.hide()}},{key:"editContact",value:function(e){this.setState({action:"edit"}),this.renderForm(e);var t=e.target.closest("tr").id,a=e.target.closest("tr").childNodes;console.log(t),document.getElementById("id").value=t,document.getElementById("town-city").value=a[2].innerText,document.getElementById("address1").value=a[5].innerText,document.getElementById("address2").value=a[6].innerText,document.getElementById("post-code").value=a[4].innerText,document.getElementById("county").value=a[7].innerText,document.getElementById("name").value=a[1].innerText,document.getElementById("email").value=a[8].innerText,document.getElementById("telephone").value=a[3].innerText}},{key:"operateFormatter",value:function(e,t,a){var n,c;return l.a.createElement("div",null,l.a.createElement("a",(n={rel:"tooltip",title:"Edit",className:"table-action edit"},Object(d.a)(n,"title","Edit"),Object(d.a)(n,"onClick",this.editContact),n),l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("a",(c={rel:"tooltip",title:"Remove",ref:"delete",className:"table-action remove"},Object(d.a)(c,"title","Remove"),Object(d.a)(c,"onClick",this.removeContact),c),l.a.createElement("i",{className:"fa fa-remove"})))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"blur"}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"fresh-table table-responsive full-color-orange"},l.a.createElement("div",{className:"action"},l.a.createElement("input",{type:"search",placeholder:"Search name",onChange:this.filterContacts}),l.a.createElement("button",{className:"btn-floating waves-effect waves-light add-btn",onClick:this.renderAddContact},"Add Contact"," ")),l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{"data-field":"id"},"ID"),l.a.createElement("th",{"data-field":"name","data-sortable":"true"},"Name"),l.a.createElement("th",{"data-field":"CityTown","data-sortable":"true"},"City/Town"),l.a.createElement("th",{"data-field":"Telephone","data-sortable":"true"},"Telephone"),l.a.createElement("th",{"data-field":"postCode","data-sortable":"true"},"Postcode"),l.a.createElement("th",{"data-field":"address1","data-sortable":"true"},"Address1"),l.a.createElement("th",{"data-field":"address2","data-sortable":"true"},"Address2"),l.a.createElement("th",{"data-field":"County"},"County"),l.a.createElement("th",{"data-field":"email","data-sortable":"true"},"Email"),l.a.createElement("th",{"data-field":"actions"},"Actions"))),l.a.createElement("tbody",null,this.state.listLoaded>0&&this.state.contactList.map(function(t,a){return l.a.createElement("tr",{key:a,id:t.id,name:t.name},l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.townCity),l.a.createElement("td",null,t.telephone),l.a.createElement("td",null,t.postCode),l.a.createElement("td",null,t.addressLine1),l.a.createElement("td",null,t.addressLine2),l.a.createElement("td",null,t.county),l.a.createElement("td",null,t.email),l.a.createElement("td",null,e.operateFormatter()))})))))),l.a.createElement("div",{className:"popup-form"},l.a.createElement("div",{className:"fresh-table full-color-orange"},l.a.createElement("form",{className:"col s12 popup-input"},l.a.createElement("h4",{className:"heading"},"add"===this.state.action?"Add a contact":"Update contact",l.a.createElement("a",Object(d.a)({rel:"tooltip",title:"Remove",className:"table-action remove right",onClick:this.hide},"title","Remove"),l.a.createElement("i",{className:"fa fa-remove "}))),l.a.createElement("hr",{className:"hr"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{id:"id",type:"hidden",ref:"id",className:"validate"}),l.a.createElement("input",{id:"name",type:"text",ref:"name",className:"validate",placeholder:" Name"})),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{id:"town-city",type:"text",ref:"town",className:"validate",placeholder:"City/Town"})),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{id:"telephone",type:"text",ref:"telephone",className:"validate",placeholder:"Telephone"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s8"},l.a.createElement("input",{id:"address1",type:"text",ref:"address1",className:"validate",placeholder:" Address1"})),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{id:"post-code",type:"text",ref:"postCode",className:"validate",placeholder:" Postcode",onChange:this.fetchInfoByPostcode}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s8"},l.a.createElement("input",{id:"address2",type:"text",ref:"address2",className:"validate",placeholder:" Address2"})),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{id:"county",type:"text",ref:"country",className:"validate",placeholder:" County"}))),l.a.createElement("div",{className:"row"},l.a.createElement("button",{className:"btn-floating waves-effect waves-light add-btn",onClick:"add"===this.state.action?this.addContact:this.updateContact},"add"===this.state.action?"Add Contact":"Update Contact"),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{id:"email",type:"text",ref:"email",className:"validate",placeholder:" Email"}))))))))}},{key:"renderForm",value:function(e){e.preventDefault();var t=document.getElementsByClassName("popup-form")[0],a=document.getElementsByClassName("blur")[0];a.style="opacity : 1; z-index: 10",a.style.transition="opacity .5s ease,z-index .5s ease",t.style="opacity : 1; z-index: 10",t.style.transition="opacity .5s ease,z-index .5s ease"}},{key:"hide",value:function(){var e=document.getElementsByClassName("popup-form")[0],t=document.getElementsByClassName("blur")[0];t.style="opacity : 0; z-index: -9",t.style.transition="opacity .5s ease,z-index .5s ease",e.style="opacity : 0; z-index: -10",e.style.transition="opacity .5s ease,z-index .5s ease",this.clearInputs()}},{key:"clearInputs",value:function(){document.getElementById("town-city").value="",document.getElementById("address1").value="",document.getElementById("address2").value="",document.getElementById("post-code").value="",document.getElementById("county").value="",document.getElementById("name").value="",document.getElementById("email").value="",document.getElementById("telephone").value=""}},{key:"getPopupValues",value:function(){return{townCity:document.getElementById("town-city").value,addressLine1:document.getElementById("address1").value,addressLine2:document.getElementById("address2").value,postCode:document.getElementById("post-code").value,county:document.getElementById("county").value,name:document.getElementById("name").value,email:document.getElementById("email").value,telephone:document.getElementById("telephone").value}}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},61:function(e,t,a){e.exports=a(130)},66:function(e,t,a){},68:function(e,t,a){}},[[61,2,1]]]);
//# sourceMappingURL=main.966bd795.chunk.js.map